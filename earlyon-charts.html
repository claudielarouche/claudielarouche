<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charts</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>

<h1>Charts</h1>

<!-- Container for the chart -->
<div id="chart-container"></div>

<script>
    // Load the data from the archive.csv file
    d3.csv('https://claudielarouche.com/earlyON/archive.csv').then(data => {
        // Your chart code here

        // For example, let's create a simple bar chart showing the count of rows by "Day of Week"
        const dayOfWeekCounts = d3.rollup(data, v => v.length, d => d['Day of Week']);

        const svg = d3.select('#chart-container')
            .append('svg')
            .attr('width', 400)
            .attr('height', 300);

        const margin = { top: 20, right: 20, bottom: 30, left: 40 };
        const width = 400 - margin.left - margin.right;
        const height = 300 - margin.top - margin.bottom;

        const x = d3.scaleBand()
            .domain([...dayOfWeekCounts.keys()])
            .range([margin.left, width - margin.right])
            .padding(0.1);

        const y = d3.scaleLinear()
            .domain([0, d3.max(dayOfWeekCounts.values())])
            .nice()
            .range([height - margin.bottom, margin.top]);

        svg.append('g')
            .attr('transform', `translate(0,${height - margin.bottom})`)
            .call(d3.axisBottom(x));

        svg.append('g')
            .attr('transform', `translate(${margin.left},0)`)
            .call(d3.axisLeft(y));

        svg.selectAll('.bar')
            .data(dayOfWeekCounts)
            .enter().append('rect')
            .attr('class', 'bar')
            .attr('x', d => x(d[0]))
            .attr('y', d => y(d[1]))
            .attr('width', x.bandwidth())
            .attr('height', d => height - margin.bottom - y(d[1]));
    });
</script>

</body>
</html>
