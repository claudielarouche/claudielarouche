<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>City of Ottawa Swim Schedule Extractor</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
		<!--<link rel="stylesheet" type="text/css" href="style.css">-->
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<style>
        #urls {
            width: 100%;
            height: 25em; /* 25 lines */
        }
    </style>
</head>
<body>
	<div class="container">
    <h1>City of Ottawa Swim Schedule Extractor v2</h1>
    <form id="scrapingForm">
        <label for="urls">Enter URLs (separated by carriage return):</label><br>
        <textarea id="urls" rows="4" cols="50">https://ottawa.ca/en/recreation-and-parks/facilities/place-listing/francois-dupuis-recreation-centre</textarea><br>        
        <button type="button" onclick="scrape()">Extract</button>
    </form>
    <div id="results">
        <!-- Display scraping results here -->
    </div>
	</div>
    <script>
      function scrape() {
    var urlsInput = document.getElementById("urls").value.trim().split("\n");
    

    // Clear previous results
    document.getElementById("results").innerHTML = "";

    urlsInput.forEach(function(url, index) {
	    
        fetch(url)
        .then(response => {
            if (!response.ok) {
		  //  document.getElementById("results").appendChild("Unable to access this web page");
                throw new Error("Unable to access this web page");
            }
            return response.text();
        })
        .then(data => {
            var parser = new DOMParser();
            var htmlDoc = parser.parseFromString(data, 'text/html');
            
           

            // Display content of the <h1> tag
            var h1Content = htmlDoc.querySelector('h1');
            if (h1Content) {
                var h1Container = document.createElement("h2");
                h1Container.textContent = "H1: " + h1Content.textContent;
                document.getElementById("results").appendChild(h1Container);
            }

		// Find the table with caption containing "Swim" (case insensitive)
            var swimTable = htmlDoc.querySelector('table[summary*="swim" i]');
            if (swimTable) {
                // Append the HTML content of the swim table to the results div
                var swimTableHTML = swimTable.outerHTML;
                document.getElementById("results").insertAdjacentHTML('beforeend', swimTableHTML);
            } else {
                // If no swim table found, display message
                var noSwimTableMessage = document.createElement("div");
                noSwimTableMessage.textContent = "No swim schedule found on this page.";
                document.getElementById("results").appendChild(noSwimTableMessage);
            }

	 
        })
        .catch(error => {
            console.error('Error fetching data:', error);
            // Display error message if unable to access the page

		
		
            var resultElement = document.createElement("div");
            resultElement.textContent = "Unable to access this web page";
            document.getElementById("results").appendChild(resultElement);

            
        });
    });
}





    </script>
</body>
</html>
