---
layout: page
exclude_ga: true
---

<div class="csps-callout" style="border: 1px solid #ccc; padding: 1rem; margin-bottom: 2rem; background-color: #f9f9f9; border-radius: 6px;">
  ðŸ“š NOTE: THIS IS A DEV PAGE
</div>


{% if page.image-hero %}
  <div class="project-banner">
    <img src="{{ page.image-hero | relative_url }}" alt="{{ page.title }}" />
  </div>
{% endif %}


{{ content }}

{% if site.collections.projects and page.tags and page.tags.size > 0 %}
Entered the first if
  {%- assign primary_tag = page.tags[0] -%}

  {%- assign related = site.collections.projects.docs
       | where_exp: "p", "p.data.tags contains primary_tag"
       | where_exp: "p", "p.url != page.url"
       | shuffle
       | first: 3 -%}

  {%- if related.size > 0 -%}
    <h2>Other projects you might be interested in</h2>
    <div class="projects-gallery">
      {% for p in related %}
        <div class="project-card">
          <a href="{{ p.url | relative_url }}">
            {% if p.data.image %}
              <img src="{{ p.data.image | relative_url }}" alt="{{ p.data.title }}" />
            {% endif %}
            <h3>{{ p.data.title }}</h3>
          </a>
        </div>
      {% endfor %}
    </div>
  {%- else -%}
    <!-- DEBUG: no related projects found -->
  {%- endif -%}

{% else %}
  <!-- DEBUG:
       {% if site.collections.projects %}âœ” projects collection{% else %}âš  no projects collection{% endif %}
       {% if page.tags and page.tags.size > 0 %}âœ” page has tags: {{ page.tags | jsonify }}{% else %}âš  page.tags missing{% endif %}
  -->
{% endif %}

<!--
Previous version
{% assign primary_tag = page.tags[0] %}


{% assign related = site.projects
   | where_exp: "p", "p.tags contains primary_tag"
   | where_exp: "p", "p.title != page.title"
%}

{% if related.size > 0 %}
  <h2>Other projects you might be interested in</h2>
  <div class="projects-gallery">
    {% for p in related %}
      <div class="project-card">
        <a href="{{ p.url | relative_url }}">
          {% if p.image %}
            <img src="{{ p.image | relative_url }}" alt="{{ p.title }}" />
          {% endif %}
          <h3>{{ p.title }}</h3>
        </a>
      </div>
    {% endfor %}
  </div>
{% endif %}

-->
<!--

(from Home page)

{% assign categories = "Ottawa,Work,Other,Archive" | split: "," %}

{% for category in categories %}
  <h2>{{ category }} Projects</h2>
  <div class="projects-gallery">
    {% assign filtered = site.projects | where_exp: "item", "item.tags contains category" %}
    {% if filtered.size > 0 %}
      {% for project in filtered %}
        <div class="project-card">
          <a href="{{ project.url }}">
            <img src="{{ project.image }}" alt="{{ project.title }}" />
            <h3>{{ project.title }}</h3>
          </a>
          <p>{{ project.description }}</p>
        </div>
      {% endfor %}
    {% else %}
      <p>No projects in this category yet.</p>
    {% endif %}
  </div>
{% endfor %}

-->
